---
title: "Profiling_spsur_functions"
author: "Román Mínguez"
date: "22 de marzo de 2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

Archivo para realizar profiling de `spsur` functions:

Initialization:

```{r}
library(spsur)
data("spc", package = "spsur")
spcformula <- WAGE83 | WAGE81 ~ UN83 + NMR83 + SMSA | UN80 + NMR80 + SMSA
data(NCOVR, package = "spsur")
NCOVRformula <- HR80 | DV80 | FP79 ~ PS80 + UE80 | 
                                     PS80 + UE80 + SOUTH | PS80
```


## spsurml
```{r}
library(profvis)
setwd("C:/Users/roman/Dropbox/spsur/notes/profiling spsur package")
mlcontrol <- list(tol = 0.1, maxit = 20, trace = TRUE)
Rprof(filename="Rprof_spsurml.out")
NCOVRSUR.slm <- spsurml(Form = NCOVRformula, data = NCOVR,
                      type = 'slm', W = W, control = mlcontrol, 
                      cov = TRUE)

summary(NCOVRSUR.slm)
Rprof(NULL)
#summaryRprof()
profvis(prof_input = "Rprof_spsurml.out")
```

